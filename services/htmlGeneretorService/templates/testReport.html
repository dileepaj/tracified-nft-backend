<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=div, initial-scale=1.0">
        <!-- Load d3.js -->
        <script type="text/javascript" src="https://d3js.org/d3.v7.min.js"></script>
        <script src="https://d3js.org/d3-scale-chromatic.v1.min.js"></script>
        <!--JQuery-->
        <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
        <!-- Bootstrap CSS -->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
            integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

        <!--Bootsrap-->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
            crossorigin="anonymous"></script>
      <script src="https://cdn.jsdelivr.net/npm/chart.js@3.7.1/dist/chart.min.js"></script>
        <title>Document</title>
<!--heander end-->
	<style>
	ul.timeline {
    list-style-type: none;
    position: relative;
}

ul.timeline:before {
    content: ' ';
    background: #47da34;
    display: inline-block;
    position: absolute;
    left: 29px;
    width: 2px;
    height: 100%;
    z-index: 400;
}

ul.timeline>li {
    margin: 20px 0;
    margin-left: 25px;
    padding-left: 20px;
}

ul.point>li {
    margin-left: 50px;
    padding-left: 5px;
}

ul.timeline>li:before {
    content: ' ';
    background: white;
    display: inline-block;
    position: absolute;
    border-radius: 50%;
    border: 4px solid #2adb1a;
    left: 20px;
    width: 20px;
    height: 20px;
    z-index: 400;
}

.timeline-date {
    color: rgb(56, 56, 56);
}

.timeline-header {
    color: #000000;
    font-size: 19px;
    font-weight: bold;
}

.point {
    list-style-type: circle;
}

.timeline-key {
    font-size: 20px;
}

.timeline-value {
    font-size: 16px;
    color: #636463;
    margin-left: 15px;
    font-style: italic;
}
.botCard {
    background-color: rgba(176, 221, 176, 0.137);
    margin: 5px;
}

.botCard p {
    font-weight: 500;
    font-size: 12px;
    margin-top: 1px;
    margin-bottom: 1px;
    margin-left: 5px;
    margin-right: 5px;
}
	</style>
	</header>
	 <!--body-->
 <body>
    <h1 class="text-center">Tracified NFT</h1>
    </div>
    <div class="d-flex justify-content-center align-content-center flex-wrap" id="container">
    </div>
</body>
 <!--body-->
	<script type="text/javascript">

    function displayTable(data) {

        if (!!data.TableContent) {
            let cardId = "tracified" + data.WidgetId
            createCard(cardId, "Table")
            //craete boostarp cards Node and it to barchart 
            let tableDiv = document.createElement("div")
            tableDiv.style = "width:500px; heigth:fit-content;"
            let tableNode = document.createElement("table");
            tableNode.className = `table table-bordered`;
            tableNode.innerHTML = data.TableContent
            tableDiv.append(tableNode)
            document.getElementById(cardId).appendChild(tableDiv);
        }

    }

    function displayProofBot(dataArray) {
        console.log('dataArray', dataArray)
        let cardId = "tracified" + dataArray.WidgetId
        createCard(cardId, "ProofBot")
        let botNode = document.getElementById(cardId)
        let h5=document.createElement('p')
        h5.append(document.createTextNode(dataArray.Title))
        h5.style="margin-bottom:5px; font-weight:bold;"
        botNode.appendChild(h5)
        botNode.append(h5)
        dataArray.Data.map((proofBotUrlbatchSpecific, i) => {
            let botSubcard = document.createElement('div')
            botSubcard.className = "card botCard"
            botNode.append(botSubcard)
            let p = document.createElement('p')
            p.className = "text-start"
            p.append(document.createTextNode(`TxnHash :${proofBotUrlbatchSpecific.TxnHash}`))
            let p1 = document.createElement('p')
            p1.className = "text-start"
            p1.append(document.createTextNode(`ProductName :${dataArray.ProductName}`))
            botNode.appendChild(p)
            let p2 = document.createElement('p')
            p2.className = "text-start"
            p2.append(document.createTextNode(`Timestamp :${dataArray.Timestamp}`))
            let p3 = document.createElement('p')
            p3.className = "text-start"
            p3.append(document.createTextNode(`Availble Proofs :`))
            botSubcard.appendChild(p)
            botSubcard.appendChild(p1)
            botSubcard.appendChild(p2)
            botSubcard.appendChild(p3)
            if (!!proofBotUrlbatchSpecific.Urls) {
                proofBotUrlbatchSpecific.Urls.map((data) => {
                    let p = document.createElement("p");
                    p.className = "text-start"
                    let anchor = document.createElement('a');
                    anchor.href = data.Url;
                    anchor.innerText = data.Type;
                    p.appendChild(anchor);
                    botSubcard.append(p);

                })
            }
        })
    }

    function displayImages(data) {
        let cardId = "tracified" + data.WidgetId

        createCard(cardId, "Image")
        let image = document.createElement("img")
        image.alt = ""
        image.src = data.Base64Image
        image.width = '500'
        image.height = '400'
        let imageNode = document.getElementById(cardId);
        imageNode.append(image)
    }

    function createCard(cardId, name) {
        let card = document.createElement("div")
        card.className = `card text-center justify-content-center m-3`;
        card.style = "min-width: 20rem; max-height: fit-content; "
        let cardTitle = document.createElement("h5")
        cardTitle.className = "card-header"
        cardTitle.appendChild(document.createTextNode(name));
        card.appendChild(cardTitle);
        let cardBody = document.createElement("div");
        cardBody.className = "card-body text-center  justify-content-center"
        cardBody.id = cardId
        card.append(cardBody)
        document.getElementById("container").appendChild(card);
    }

    function createDomCardForCanvas(cardId, name) {
        let card = document.createElement("div")
        card.className = `card text-center justify-content-center m-3`;
        card.style = "min-width: 20rem; max-height: fit-content; "
        let cardTitle = document.createElement("h5")
        cardTitle.className = "card-header"
        cardTitle.appendChild(document.createTextNode(name));
        card.appendChild(cardTitle);
        let cardBody = document.createElement("div");
        cardBody.className = "card-body text-center  justify-content-center"
        cardBody.id = cardId + `nft`
        let canv = document.createElement("canvas");
        canv.id = cardId
        canv.width = "500"
        canv.height = "400"
        cardBody.append(canv)
        card.append(cardBody)
        document.getElementById("container").appendChild(card);
    }

    function displayBarchart(data) {
        let cardId = "tracified" + data.WidgetId
        createDomCardForCanvas(cardId, "BarChart")
        lables = []
        dataValue = []
        data.ChartData.forEach(element => {
            lables.push(element.Name)
            dataValue.push(element.Value)
        })
        let barChartStruct = {
            labels: lables,
            datasets: [{
                label: data.ChartTitle,
                data: dataValue,
                backgroundColor: data.Color,
                borderWidth: 1
            }]
        }

        const ctx = document.getElementById(cardId).getContext('2d');
        const myChart = new Chart(ctx, {
            type: 'bar', data: barChartStruct
            ,
            options: {
                scales: {
                    y: {
                        beginAtZero: true
                    }
                }
            }
        });
    }

    function displayPiechart(data) {
        let cardId = "tracified" + data.WidgetId
        createDomCardForCanvas(cardId, "PieChart")
        lables = []
        dataValue = []
        data.ChartData.forEach(element => {
            lables.push(element.Name)
            dataValue.push(element.Value)
        })
        let pieChartStruct = {
            labels: lables,
            datasets: [{
                label: data.ChartTitle,
                data: dataValue,
                backgroundColor: data.Color,
                borderWidth: 1
            }]
        }

        const ctx = document.getElementById(cardId).getContext('2d');
        const myChart = new Chart(ctx, {
            type: 'pie', data: pieChartStruct
            ,
            options: {
                scales: {
                    y: {
                        beginAtZero: true
                    }
                }
            }
        });
    }

    function displayBubblechart(data) {
        let cardId = "tracified" + data.WidgetId
        createDomCardForCanvas(cardId, "bubbleChart")
        lables = []
        dataValue = []
        console.log('dataValue', dataValue)
        data.ChartData.forEach(element => {

            if (element.Value < 50) {
                lables.push(element.Name)
                dataValue.push({
                    x: element.X,
                    y: element.Y,
                    r: element.Value
                })
            } else if (element.Value > 50 && element.Value < 10000) {
                lables.push(element.Name)
                dataValue.push({
                    x: element.X,
                    y: element.Y,
                    r: element.Value / 100
                })
            } else if (element.Value > 10000 && element.Value < 100000) {
                lables.push(element.Name)
                dataValue.push({
                    x: element.X,
                    y: element.Y,
                    r: element.Value / 10000
                })
            } else {
                lables.push(element.Name)
                dataValue.push({

                    x: element.X,
                    y: element.Y,
                    r: (element.Value) / 100000
                })
            }
        })
        let bubbleChartStruct = {
            labels: lables,
            datasets: [{
                label: data.ChartTitle,
                data: dataValue,
                backgroundColor: data.Color,
                borderWidth: 1
            }]
        }

        const ctx = document.getElementById(cardId).getContext('2d');
        const myChart = new Chart(ctx, {
            type: 'bubble', data: bubbleChartStruct
            ,
            options: {
                scales: {
                    y: {
                        beginAtZero: true
                    }
                }
            }
        });
    }

    function displayTimeline(data) {
        let cardId = "tracified" + data.WidgetId
        createCard(cardId, "Timeline")
        let timelineNode = document.getElementById(cardId);

        let timeline = document.createElement('div')
        timeline.className = "text-start row"
        timeline.style = "width: 500px;"
        let timelineHeader = document.createElement('h3')
        timelineHeader.appendChild(document.createTextNode(data.Title));
        let ulHeader = document.createElement('ul')
        timeline.append(timelineHeader)
        data.TimelineData.forEach(tdata => {
            ulHeader.className = "timeline"
            let liHeader = document.createElement('li')
            let llHeader = document.createElement('p')
            liHeader.className = "timeline-header"
            liHeader.appendChild(document.createTextNode(tdata.Title))
            let ul = document.createElement('ul')
            ul.className = "point"
            tdata.Children.forEach(data => {
                let li = document.createElement('li')
                let p = document.createElement('p')
                let spanKey = document.createElement('span')
                spanKey.className = "timeline-key"
                spanKey.appendChild(document.createTextNode(data.Key))
                p.appendChild(spanKey)
                let spanValue = document.createElement('span')
                spanValue.className = "timeline-value"
                spanValue.appendChild(document.createTextNode(data.Value))
                p.appendChild(spanValue)
                li.appendChild(p)
                ul.appendChild(li)
            })
            ulHeader.append(liHeader)
            ulHeader.append(ul)
            timeline.append(ulHeader)
        })
        timelineNode.append(timeline)
    }

</script>
	<script type="text/javascript">
	let data = {"Id":"000000000000000000000000","ProjectId":"project1","ProjectName":"ABC","NFTName":"NFT1","UserId":"ABC","TenentId":"T1","TenentName":"Nisal","Timestamp":"2022-02-28T09:12:30+05:30","CreatorName":"ABC","ContentOrderData":[{"WidgetId":"pie1","Type":"PieChart"},{"WidgetId":"1648389262960","Type":"BarChart"},{"WidgetId":"tab1","Type":"Table"},{"WidgetId":"img1","Type":"Image"},{"WidgetId":"tab2","Type":"Table"},{"WidgetId":"129262960","Type":"PieChart"},{"WidgetId":"qaqddd","Type":"Timeline"},{"WidgetId":"proofb1","Type":"ProofBot"}],"NftContent":{"BarCharts":[{"WidgetId":"nnnn2960","ProjectId":"ABC","ChartTitle":"Bar Chart","ChartData":[{"Name":"Sri Lanka","X":0,"Value":200,"Y":0},{"Name":"India","X":0,"Value":900,"Y":0},{"Name":"Bangladesh","X":0,"Value":800,"Y":0},{"Name":"Pakistan","X":0,"Value":600,"Y":0},{"Name":"Nepal","X":0,"Value":100,"Y":0}],"Color":["#69b3a2","#69b3a2","#69b3a2","#69b3a2","#69b3a2","#69b3a2","#69b3a2","#69b3a2","#69b3a2","#69b3a2"],"XAxis":"X Axis","YAxis":"Y Axis","FontColor":"#000000","FontSize":10,"Width":500,"Height":200,"Type":"BarChart","Domain":[0,1000]},{"WidgetId":"1648389262960","ProjectId":"ABC","ChartTitle":"Bar Chart","ChartData":[{"Name":"Sri Lanka","X":0,"Value":200,"Y":0},{"Name":"India","X":0,"Value":900,"Y":0},{"Name":"Bangladesh","X":0,"Value":800,"Y":0},{"Name":"Pakistan","X":0,"Value":600,"Y":0},{"Name":"Nepal","X":0,"Value":100,"Y":0}],"Color":["#69b3a2","#69b3a2","#69b3a2","#69b3a2","#69b3a2","#69b3a2","#69b3a2","#69b3a2","#69b3a2","#69b3a2"],"XAxis":"X Axis","YAxis":"Y Axis","FontColor":"#000000","FontSize":10,"Width":500,"Height":200,"Type":"BarChart","Domain":[0,1000]}],"PieCharts":[{"WidgetId":"129262960","ProjectId":"ABC","ChartTitle":"Bar Chart","ChartData":[{"Name":"Sri Lanka","X":0,"Value":200,"Y":0},{"Name":"India","X":0,"Value":900,"Y":0},{"Name":"Bangladesh","X":0,"Value":800,"Y":0},{"Name":"Pakistan","X":0,"Value":600,"Y":0},{"Name":"Nepal","X":0,"Value":100,"Y":0}],"Color":["#69b3a2","#69b3a2","#69b3a2","#69b3a2","#69b3a2","#69b3a2","#69b3a2","#69b3a2","#69b3a2"],"XAxis":"","YAxis":"","FontColor":"#000000","FontSize":10,"Width":500,"Height":350,"Type":"PieChart","Domain":[]}],"BubbleCharts":[{"WidgetId":"18411428643","ProjectId":"ABC","ChartTitle":"Bubble Chart","ChartData":[{"Name":"Item 1","X":100,"Value":1350,"Y":60},{"Name":"Item 2","X":30,"Value":2500,"Y":80},{"Name":"Item 3","X":50,"Value":5700,"Y":40},{"Name":"Item 4","X":190,"Value":30000,"Y":100},{"Name":"Item 5","X":80,"Value":47500,"Y":170}],"Color":["#c7d3ec","#a5b8db","#879cc4","red","#5a6782"],"XAxis":"","YAxis":"","FontColor":"#000000","FontSize":12,"Width":500,"Height":300,"Type":"BubbleChart","Domain":null}],"Stats":[{"WidgetId":"StatR1","ProjectId":"","Title":"stast","StatData":[{"Key":"freshness","Value":"98%","Color":"#4daf4a"},{"Key":"Quality","Value":"80%","Color":"#377eb8"},{"Key":"Quality","Value":"80%","Color":"#ff7f00"},{"Key":"freshness","Value":"98%","Color":"#984ea3"}]},{"WidgetId":"","ProjectId":"","Title":"stast","StatData":[{"Key":"freshness","Value":"98%","Color":"#4daf4a"},{"Key":"Quality","Value":"80%","Color":"#377eb8"},{"Key":"Quality","Value":"80%","Color":"#ff7f00"},{"Key":"freshness","Value":"98%","Color":"#984ea3"}]}],"Tables":[{"WidgetId":"tab2","ProjectId":"","TableTitle":"first table","TableContent":"\u003cthead\u003e\u003ctr\u003e\u003cth\u003eFirst\u003c/th\u003e\u003cth \u003eLast\u003c/th\u003e\u003cth \u003eHandle\u003c/th\u003e\u003c/tr\u003e\u003c/thead\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd\u003eMark\u003c/td\u003e\u003ctd\u003eOtto\u003c/td\u003e\u003ctd\u003e@mdo\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003eJacob\u003c/td\u003e\u003ctd\u003eThornton\u003c/td\u003e\u003ctd\u003e@fat\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003eLarry the Bird\u003c/td\u003e\u003ctd\u003e@twitter\u003c/td\u003e\u003ctd\u003e@twitter\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003eLarry the Bird\u003c/td\u003e\u003ctd\u003e@twitter\u003c/td\u003e\u003ctd\u003e@twitter\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e"},{"WidgetId":"tab1","ProjectId":"","TableTitle":"first table","TableContent":"\u003cthead\u003e\u003ctr\u003e\u003cth\u003eFirst\u003c/th\u003e\u003cth \u003eLast\u003c/th\u003e\u003cth \u003eHandle\u003c/th\u003e\u003c/tr\u003e\u003c/thead\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd\u003eMark\u003c/td\u003e\u003ctd\u003eOtto\u003c/td\u003e\u003ctd\u003e@mdo\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003eJacob\u003c/td\u003e\u003ctd\u003eThornton\u003c/td\u003e\u003ctd\u003e@fat\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003eLarry the Bird\u003c/td\u003e\u003ctd\u003e@twitter\u003c/td\u003e\u003ctd\u003e@twitter\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003eLarry the Bird\u003c/td\u003e\u003ctd\u003e@twitter\u003c/td\u003e\u003ctd\u003e@twitter\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e"}],"Images":[{"WidgetId":"img1","ProjectId":"","Title":"ImAGE 1","Type":"png","Base64Image":"data:image/png;base64, iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO9TXL0Y4OHwAAAABJRU5ErkJggg=="}],"ProofBot":[{"WidgetId":"proofb1","ProjectId":"p3","Timestamp":"2022-02-28T09:12:30+05:30","ArtifactId":"qa1","ProductId":"Huzelnut","ProductName":"asaw","TenentId":"dsadsad","OTPType":"Masterdata","WidgetType":"ProofBot","Title":"t1","Data":[{"BatchId":"001","GatewayIdentifier":"11123324","TxnType":"TDP","TxnHash":"sadasdzzq1112ss1","AvailableProofs":["POE","POC"],"Urls":[{"Type":"POE","Url":"https://getbootstrap.com/docs/4.1/content/tables/"},{"Type":"POC","Url":"https://getbootstrap.com/docs/4.1/content/tables/"}]}]}],"Timeline":[{"Id":"000000000000000000000000","ProjectId":"project2","WidgetId":"qaqddd","ArtifactId":"60cb3be3b9876b4ad69de6fb","Timestamp":"2022-02-28T09:12:30+05:30","ProductId":"60c700fd8c38098e5fc493e8","ProductName":"Nano","Title":"t1","TimelineData":[{"Title":"Seeding and germination","Children":[{"Key":"Dateofwatering","Value":"ssM"},{"Key":"Fertilizeddate","Value":"2021-01-16 09:05 AM"},{"Key":"Fertilizeddate","Value":"2021-01-15 09:05 AM"}],"Icon":"https://s3.ap-south-1.amazonaws.com/tracified"},{"Title":"Seeding and germination","Children":[{"Key":"Dateofwatering","Value":"ssM"},{"Key":"No.ofplants","Value":"20"},{"Key":"Planteddate","Value":"2021-01-15 09:05 AM"}],"Icon":"https://s3.ap-south-1.amazonaws.com/tracified"}],"WidgetType":"Timeline"}]}}
	
		displayBarchart(data.NftContent.BarCharts[
		1])
		displayTable(data.NftContent.Tables[
		1])
		displayImages(data.NftContent.Images[
		0])
		displayTable(data.NftContent.Tables[
		0])
		displayPiechart(data.NftContent.PieCharts[
		0])
			displayTimeline(data.NftContent.Timeline[
		0])
			displayProofBot(data.NftContent.ProofBot[
		0])
	</script>
	</html>

