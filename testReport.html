<!DOCTYPE html>
<html lang="en">

<head>

    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=div, initial-scale=1.0">
        <!-- Load d3.js -->
        <script type="text/javascript" src="http://d3js.org/d3.v4.min.js"></script>
        <script src="https://d3js.org/d3-scale-chromatic.v1.min.js"></script>
        <!--JQuery-->
        <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
        <!-- Bootstrap CSS -->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
            integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

        <!--Bootsrap-->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
            crossorigin="anonymous"></script>
        <!--Date picker-->
        <script src="https://unpkg.com/gijgo@1.9.13/js/gijgo.min.js" type="text/javascript"></script>
        <link href="https://unpkg.com/gijgo@1.9.13/css/gijgo.min.css" rel="stylesheet" type="text/css" />
        <link rel="stylesheet" href="./reportStyles.css">
        <title>Document</title>

    </head>

<body>
    <h1>Tracified NFT</h1>
    <h6>2022-03-05</h6>
    </div>
    <div class="container" id="container">
        <div class="row mt-4 mb-4">
            <div class="col">
                <div class="card" style="min-height: 20rem; max-height: fit-content;">
                    <h5 class="card-title">Table</h5>
                    <div class="card-body">
                        <div class="tableView" id="tableView"></div>
                    </div>
                </div>
            </div>
            <div class="col">
                <div class="card" style="min-height: 20rem; max-height: fit-content;">
                    <h5 class="card-title">Bar Chart</h5>
                    <div class="card-body " id="card2">

                    </div>
                </div>
            </div>
        </div>
        <div class="row mt-4 mb-4">
            <div class="col">
                <div class="card" style="min-height: 20rem; max-height: fit-content;">
                    <h5 class="card-title">Pie Chart</h5>
                    <div class="card-body" id="card3">

                    </div>
                </div>
            </div>
            <div class="col">
                <div class="card" style="min-height: 20rem; max-height: fit-content;">
                    <h5 class="card-title">Proof Bot</h5>
                    <div class="card-body" id="card4">


                    </div>
                </div>
            </div>
        </div>
        <div class="row mt-4 mb-4">
            <div class="col">
                <div class="card" style="min-height: 20rem; max-height: fit-content;">
                    <h5 class="card-title">Carbon</h5>
                    <div class="card-body" id="card5">

                    </div>
                </div>
            </div>
            <div class="col">
                <div class="card">
                    <h5 class="card-title">Stat</h5>
                    <div class="card-body" id="card6">


                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
<script>
    function tabledisplay() {
        var tableNode = document.createElement("table");
        tableNode.className = `table table-bordered`;
        tableNode.innerHTML = `
  <thead>
    <tr>
      <th scope="col">First</th>
      <th scope="col">Last</th>
      <th scope="col">Handle</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Mark</td>
      <td>Otto</td>
      <td>@mdo</td>
    </tr>
    <tr>
      <td>Jacob</td>
      <td>Thornton</td>
      <td>@fat</td>
    </tr>
    <tr>
      <td>Larry the Bird</td>
      <td>@twitter</td>
      <td>@twitter</td>
    </tr>
    <tr>
      <td>Larry the Bird</td>
      <td>@twitter</td>
      <td>@twitter</td>
    </tr>
  </tbody>`
        tableNode.width = "200px";
        tableNode.height = "400px";
        document.getElementById("tableView").appendChild(tableNode);
    }
    tabledisplay()
</script>
<script>
    function displayBarChart() {
        const newDiv = document.createElement("div");
        newDiv.id = `barchart`;
        newDiv.className = `barchart`;
        document.getElementById("card2").appendChild(newDiv);

        // set the dimensions and margins of the graph
        var margin = { top: 10, right: 3, bottom: 70, left: 60 },
            width = 400 - margin.left - margin.right,
            height = 280 - margin.top - margin.bottom;

        // append the svg object to the body of the page
        var svg = d3.select("#barchart")
            .append("svg")
            .attr("width", width)
            .attr("height", height + margin.top + margin.bottom)
            .append("g")
            .attr("transform",
                "translate(" + margin.left + "," + margin.top + ")");

        // Parse the Data
        let data = [{
            "Country": "US",
            "Value": 12345
        },
        {
            "Country": "Sri Lanka",
            "Value": 4900
        }]


        // X axis
        var x = d3.scaleBand()
            .range([0, width])
            .domain(data.map(function (d) { return d.Country; }))
            .padding(0.2);
        svg.append("g")
            .attr("transform", "translate(0," + height + ")")
            .call(d3.axisBottom(x))
            .selectAll("text")
            .attr("transform", "translate(-10,0)rotate(-45)")
            .style("text-anchor", "end");

        // Add Y axis
        var y = d3.scaleLinear()
            .domain([0, 13000])
            .range([height, 0]);
        svg.append("g")
            .call(d3.axisLeft(y));

        // Bars
        svg.selectAll("mybar")
            .data(data)
            .enter()
            .append("rect")
            .attr("x", function (d) { return x(d.Country); })
            .attr("y", function (d) { return y(d.Value); })
            .attr("width", x.bandwidth())
            .attr("height", function (d) { return height - y(d.Value); })
            .attr("fill", "#69b3a2")



    }
    displayBarChart()
</script>
<script>
    function displayPiechart() {
        const newDiv = document.createElement("div");
        newDiv.id = `piechart`;
        newDiv.className = `piechart`;
        document.getElementById("card3").appendChild(newDiv);
        var margin = { top: 20, right: 3, bottom: 60, left: 60 },
            width = 400 - margin.left - margin.right,
            height = 340 - margin.top - margin.bottom;
        // set the dimensions and margins of the graph

        // The radius of the pieplot is half the width or half the height (smallest one). I subtract a bit of margin.
        var radius = Math.min(width, height) / 2

        // append the svg object to the div called 'my_dataviz'
        var svg = d3.select("#piechart")
            .append("svg")
            .attr("width", width)
            .attr("height", height)
            .append("g")
            .attr("transform", "translate(" + width / 2 + "," + height / 2 + ")");

        // Create dummy data
        var data = { a: 9, b: 20, c: 30, d: 8, e: 12, f: 3, g: 7, h: 14, i: 20 }

        // set the color scale
        var color = d3.scaleOrdinal(['#4daf4a', '#377eb8', '#ff7f00', '#984ea3', '#e41a1c', '#4daf4a', '#377eb8', '#ff7f00', '#984ea3'])
            .domain(["a", "b", "c", "d", "e", "f", "g", "h", "i"])

        // Compute the position of each group on the pie:
        var pie = d3.pie()
            .sort(null) // Do not sort group by size
            .value(function (d) { return d.value; })
        var data_ready = pie(d3.entries(data))

        // The arc generator
        var arc = d3.arc()
            .innerRadius(radius * 0.5)         // This is the size of the donut hole
            .outerRadius(0)

        // Another arc that won't be drawn. Just for labels positioning
        var outerArc = d3.arc()
            .innerRadius(radius * 0.9)
            .outerRadius(radius * 0.9)

        // Build the pie chart: Basically, each part of the pie is a path that we build using the arc function.
        svg
            .selectAll('allSlices')
            .data(data_ready)
            .enter()
            .append('path')
            .attr('d', arc)
            .attr('fill', function (d) { return (color(d.data.key)) })
            .attr("stroke", "white")
            .style("stroke-width", "2px")
            .style("opacity", 0.7)

        // Add the polylines between chart and labels:
        svg
            .selectAll('allPolylines')
            .data(data_ready)
            .enter()
            .append('polyline')
            .attr("stroke", "black")
            .style("fill", "none")
            .attr("stroke-width", 1)
            .attr('points', function (d) {
                var posA = arc.centroid(d) // line insertion in the slice
                var posB = outerArc.centroid(d) // line break: we use the other arc generator that has been built only for that
                var posC = outerArc.centroid(d); // Label position = almost the same as posB
                var midangle = d.startAngle + (d.endAngle - d.startAngle) / 2 // we need the angle to see if the X position will be at the extreme right or extreme left
                posC[0] = radius * 0.95 * (midangle < Math.PI ? 1 : -1); // multiply by 1 or -1 to put it on the right or on the left
                return [posA, posB, posC]
            })

        // Add the polylines between chart and labels:
        svg
            .selectAll('allLabels')
            .data(data_ready)
            .enter()
            .append('text')
            .text(function (d) { return d.data.key })
            .attr('transform', function (d) {
                var pos = outerArc.centroid(d);
                var midangle = d.startAngle + (d.endAngle - d.startAngle) / 2
                pos[0] = radius * 0.99 * (midangle < Math.PI ? 1 : -1);
                return 'translate(' + pos + ')';
            })
            .style('text-anchor', function (d) {
                var midangle = d.startAngle + (d.endAngle - d.startAngle) / 2
                return (midangle < Math.PI ? 'start' : 'end')
            })
    }
    displayPiechart()
</script>

<script>
    function proofbot() {
        let urls = ["https://getbootstrap.com/docs/4.1/content/tables/", "https://getbootstrap.com/docs/4.1/content/tables/", "https://getbootstrap.com/docs/4.1/content/tables/"]
        const ul = document.createElement("ul");
        ul.id = `list-group`;
        ul.className = `list-group`;
        urls.map((proof) => {
            const li = document.createElement("li");
            li.className = `list-group-item`
            const textnode = document.createTextNode(proof);
            li.appendChild(textnode);
            ul.append(li);
        })
        document.getElementById("card4").appendChild(ul);
    }
    proofbot()
</script>
<script>
    function displayStat() {
        let stat = [{
            "key": "freshness",
            "value": "98%",
            "color": "#4daf4a"
        },
        {
            "key": "Quality",
            "value": "80%",
            "color": "#377eb8"
        },
        {
            "key": "Quality",
            "value": "80%",
            "color": "#ff7f00"
        },
        {
            "key": "freshness",
            "value": "98%",
            "color": "#984ea3"
        }]

        stat.map((data) => {
            const newDiv = document.createElement("div");
            newDiv.id = `stat`;
            newDiv.className = `card mb-2`;
            newDiv.style = `height: 5rem`
            newDiv.innerHTML = `<h5 class="card-title" style="background-color:${data.color}">${data.key}</h5>
                    <div class="card-body" id="card6">
                        <h6>${data.value}</h6>    

                    </div>`
            document.getElementById("card6").appendChild(newDiv);
        })
    }
    displayStat()
</script>

</html>